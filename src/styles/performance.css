/* PERFORMANCE OPTIMIZATIONS - ANTI-LAG CSS */

/* =================
   ANIMACIONES CSS PURAS ULTRA-OPTIMIZADAS
   ================= */

/* Base de optimización GPU */
.composite-layer {
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
}

.scroll-optimized {
  contain: layout style paint;
  transform: translateZ(0);
  will-change: transform;
}

/* =================
   CAROUSEL ANIMATIONS
   ================= */

.carousel-container {
  contain: layout style paint;
  transform: translateZ(0);
  overflow: hidden;
  isolation: isolate;
}

.carousel-slide {
  will-change: transform, opacity;
  transform: translateZ(0);
  transition: none; /* Sin transiciones CSS, solo animaciones */
}

.carousel-slide-active {
  animation: slideInActive 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.carousel-slide-prev {
  animation: slideOutLeft 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.carousel-slide-next {
  animation: slideOutRight 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes slideInActive {
  from {
    transform: translateX(100%) translateZ(0);
    opacity: 0;
  }
  to {
    transform: translateX(0) translateZ(0);
    opacity: 1;
  }
}

@keyframes slideOutLeft {
  from {
    transform: translateX(0) translateZ(0);
    opacity: 1;
  }
  to {
    transform: translateX(-100%) translateZ(0);
    opacity: 0;
  }
}

@keyframes slideOutRight {
  from {
    transform: translateX(0) translateZ(0);
    opacity: 1;
  }
  to {
    transform: translateX(100%) translateZ(0);
    opacity: 0;
  }
}

/* =================
   SERVICES ANIMATIONS
   ================= */

.services-container {
  contain: layout style paint;
  transform: translateZ(0);
}

.service-card {
  contain: layout style paint;
  will-change: transform, opacity;
  transform: translateZ(0);
  opacity: 0;
  transform: translateY(30px) translateZ(0);
  transition: none;
}

.service-card-visible {
  animation: serviceCardIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes serviceCardIn {
  from {
    opacity: 0;
    transform: translateY(30px) translateZ(0);
  }
  to {
    opacity: 1;
    transform: translateY(0) translateZ(0);
  }
}

/* Hover optimizado para service cards */
.service-card-hover {
  transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.service-card-hover:hover {
  transform: translateY(-8px) translateZ(0);
}

/* =================
   IMAGEN OPTIMIZATIONS
   ================= */

.project-image {
  contain: layout style paint;
  will-change: transform;
  transform: translateZ(0);
}

.optimized-image-container {
  contain: layout style paint;
  transform: translateZ(0);
}

.image-loading {
  background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* =================
   SECTION ANIMATIONS
   ================= */

.section-fade-in {
  opacity: 0;
  transform: translateY(20px) translateZ(0);
}

.section-fade-in-visible {
  animation: sectionFadeIn 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes sectionFadeIn {
  from {
    opacity: 0;
    transform: translateY(20px) translateZ(0);
  }
  to {
    opacity: 1;
    transform: translateY(0) translateZ(0);
  }
}

/* =================
   STAGGER ANIMATIONS
   ================= */

.stagger-item {
  opacity: 0;
  transform: translateY(20px) translateZ(0);
}

.stagger-item-1 { animation-delay: 0.1s; }
.stagger-item-2 { animation-delay: 0.2s; }
.stagger-item-3 { animation-delay: 0.3s; }
.stagger-item-4 { animation-delay: 0.4s; }

.stagger-visible {
  animation: staggerIn 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes staggerIn {
  from {
    opacity: 0;
    transform: translateY(20px) translateZ(0);
  }
  to {
    opacity: 1;
    transform: translateY(0) translateZ(0);
  }
}

/* GPU Acceleration para todos los elementos animados */
.motion-element {
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  perspective: 1000px;
}

/* Smooth scrolling optimizado */
html {
  scroll-behavior: smooth;
  overflow-x: hidden;
}

/* CRÍTICO: Optimización para animaciones de entrada */
@media (prefers-reduced-motion: no-preference) {
  .fade-in {
    animation: fadeIn 0.3s ease-out forwards;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
}

/* Deshabilitar animaciones si el usuario prefiere reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Optimización para servicios específicamente */
.services-grid {
  contain: layout;
  will-change: auto;
}

.service-card {
  contain: layout style paint;
  will-change: box-shadow;
  transform: translateZ(0);
}

/* Optimización específica para imágenes */
.project-image {
  contain: layout style;
  will-change: opacity;
  transform: translateZ(0);
}

/* Transitions más rápidas y suaves */
.transition-optimized {
  transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Evitar layout thrashing */
.layout-stable {
  contain: layout;
}

/* Crítico: Composite layer para animaciones */
.composite-layer {
  transform: translateZ(0);
  will-change: transform, opacity;
  backface-visibility: hidden;
  perspective: 1000px;
}
